# =============================================================================
# Shakwa Backend - Logging ConfigMap
# =============================================================================
# Contains logging and observability configuration
# Adjust these settings based on your monitoring requirements
# =============================================================================

apiVersion: v1
kind: ConfigMap
metadata:
  name: shakwa-logging-config
  namespace: shakwa
  labels:
    app.kubernetes.io/name: shakwa
    app.kubernetes.io/component: config
    app.kubernetes.io/part-of: shakwa-platform
    config-type: logging
  annotations:
    description: "Logging configuration for Shakwa Backend"
data:
  # ===========================================
  # Log Level Configuration
  # ===========================================
  # Options: error, warn, info, http, verbose, debug, silly
  LOG_LEVEL: "info"

  # ===========================================
  # Log Output Configuration
  # ===========================================
  LOG_DIR: "/app/logs"
  LOG_CONSOLE: "true"           # Enable console output (for kubectl logs)
  LOG_FILE: "false"             # Disable file logging in containers (use stdout)
  LOG_JSON: "true"              # JSON format for log aggregation

  # ===========================================
  # Log Rotation (if file logging enabled)
  # ===========================================
  LOG_MAX_SIZE: "20m"           # Max size per log file
  LOG_MAX_FILES: "7d"           # Keep logs for 7 days
  LOG_ERROR_MAX_FILES: "14d"    # Keep error logs for 14 days
  LOG_ZIP_ARCHIVE: "true"       # Compress old log files

  # ===========================================
  # HTTP Request Logging
  # ===========================================
  LOG_HTTP: "true"              # Log HTTP requests
  LOG_HTTP_BODY: "false"        # Don't log request bodies (security)
  LOG_HTTP_HEADERS: "false"     # Don't log headers (security)

  # ===========================================
  # Performance Logging
  # ===========================================
  LOG_SLOW_REQUESTS: "true"
  LOG_SLOW_REQUEST_THRESHOLD: "1000"  # Log requests taking > 1000ms
  LOG_QUERY_TIME: "true"              # Log database query times
  LOG_QUERY_THRESHOLD: "500"          # Log queries taking > 500ms

  # ===========================================
  # Error Tracking
  # ===========================================
  LOG_STACK_TRACE: "true"       # Include stack traces in errors
  LOG_ERROR_DETAILS: "true"     # Include detailed error info
